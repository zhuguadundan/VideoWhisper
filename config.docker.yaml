# 视频转文本处理系统配置 - Docker版本

# API配置
apis:
  siliconflow:
    base_url: "https://api.siliconflow.cn/v1"
    api_key: ""  # 请通过网页设置页面配置或环境变量设置
    model: "FunAudioLLM/SenseVoiceSmall"
  
  openai:
    api_key: ""  # 请通过网页设置页面配置或环境变量设置
    model: "gpt-4"
    base_url: ""  # 可选
  
  gemini:
    api_key: ""  # 请通过网页设置页面配置或环境变量设置
    base_url: ""  # 可选，留空使用默认地址
    model: "gemini-pro"

# 系统配置 - Docker环境优化
system:
  temp_dir: "/app/temp"      # Docker容器内路径 - 自动管理最近3次任务
  output_dir: "/app/output"  # Docker容器内路径 - 持久化存储
  max_file_size: 500         # MB
  audio_format: "wav"
  audio_sample_rate: 16000

# Web服务配置
web:
  host: "0.0.0.0"    # 重要：Docker容器内需要绑定到所有接口
  port: 5000
  debug: false       # 生产环境关闭调试模式

# HTTPS配置 - Docker环境默认启用
https:
  enabled: true    # 默认启用HTTPS
  port: 5443      # HTTPS端口
  host: "0.0.0.0"
  auto_generate: true  # 自动生成自签名证书
  domain: "localhost"  # 证书域名
  country: "CN"        # 国家代码
  state: "Beijing"     # 州/省
  organization: "VideoWhisper Self-Signed"  # 组织名称
  cert_file: "/app/config/cert.pem"  # 证书文件路径（容器内路径）
  key_file: "/app/config/key.pem"    # 私钥文件路径（容器内路径）

# 视频下载配置 - Docker环境优化
downloader:
  general:
    format: "best[height<=720]/best"  # 默认720p以节省容器空间
    audio_format: "bestaudio/best"
    quiet: true                       # 容器环境建议开启静默模式

# 安全配置（Docker样例：默认更严格，可用环境变量放宽以兼容旧部署）
security:
  allowed_api_hosts: []
  allow_insecure_http: false
  allow_private_addresses: false
  enforce_api_hosts_whitelist: false

# Webhook 通知配置（可选）
webhook:
  enabled: false            # 是否启用任务完成后 webhook 通知
  base_url: ""              # 可选，用于在通知中拼接访问链接，例如 https://your-domain.com
  bark:
    enabled: false          # 是否启用 Bark 推送
    server: "https://api.day.app"  # Bark 服务器地址
    key: ""                 # Bark 设备 key
    group: "VideoWhisper"   # 可选，Bark 分组名称
  wecom:
    enabled: false          # 是否启用企业微信机器人通知
    webhook_url: ""         # 企业微信机器人 webhook 完整 URL
    mentioned_mobile_list: []  # 可选，被 @ 的手机号列表
    mentioned_userid_list: []  # 可选，被 @ 的企业微信用户 ID 列表

# Docker环境说明
# 存储结构：
# - /app/temp: 临时文件，自动清理保留最近3次任务
# - /app/output: 结果文件持久化存储
# - /app/logs: 应用运行日志
# - /app/config: 配置文件目录
#
# 推荐资源配置：
# - Memory: 2GB+
# - CPU: 1 core+
# - Disk: 10GB+ (取决于处理的视频数量和大小)
